#* @vtlvariable name="currentClass" type="org.eclipse.emf.ecore.EClass" *#
#* @vtlvariable name="FQNHelper" type="org.kevoree.modeling.kotlin.generator.ProcessorHelper" *#
#* @vtlvariable name="ctx" type="org.kevoree.modeling.kotlin.generator.GenerationContext" *#
#* @vtlvariable name="packElem" type="java.lang.String" *#

var containedIterable : Iterable<$ctx.getKevoreeContainer().get()>?

override fun containedElements() : Iterable<$ctx.getKevoreeContainer().get()> {
   //if(containedIterable == null){
        var containedIterables = Array<Any?>($currentClass.getEAllContainments().size(),{i ->
             when (i) {
                 #set($i=0)
                 #foreach( $ref in $currentClass.getEAllContainments())
                 $i -> {
                     #if(${ref.getEReferenceType().getEIDAttribute()})
                         _${ref.getName()}.values()
                     #else
                         _${ref.getName()}
                     #end
                 }
                 #set($i=$i+1)
                 #end
                 else -> {}
             }
        })
        containedIterable = ${packElem}.CompositeIterable(containedIterables)
   //}
   return containedIterable!!
}

